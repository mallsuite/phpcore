<?php
// +----------------------------------------------------------------------
// | ShopSuite商城系统 [ 赋能开发者，助力企业发展 ]
// +----------------------------------------------------------------------
// | 版权所有 随商信息技术（上海）有限公司
// +----------------------------------------------------------------------
// | 未获商业授权前，不得将本软件用于商业用途。禁止整体或任何部分基础上以发展任何派生版本、
// | 修改版本或第三方版本用于重新分发。
// +----------------------------------------------------------------------
// | 官方网站: https://www.shopsuite.cn  https://www.kuteshop.cn
// +----------------------------------------------------------------------
// | 版权和免责声明:
// | 本公司对该软件产品拥有知识产权（包括但不限于商标权、专利权、著作权、商业秘密等）
// | 均受到相关法律法规的保护，任何个人、组织和单位不得在未经本团队书面授权的情况下对所授权
// | 软件框架产品本身申请相关的知识产权，禁止用于任何违法、侵害他人合法权益等恶意的行为，禁
// | 止用于任何违反我国法律法规的一切项目研发，任何个人、组织和单位用于项目研发而产生的任何
// | 意外、疏忽、合约毁坏、诽谤、版权或知识产权侵犯及其造成的损失 (包括但不限于直接、间接、
// | 附带或衍生的损失等)，本团队不承担任何法律责任，本软件框架只能用于公司和个人内部的
// | 法律所允许的合法合规的软件产品研发，详细见https://www.shopsuite.cn/policy
// +----------------------------------------------------------------------
 namespace Kuteshop\Core\Repository; use App\Exceptions\ErrorException; use Closure; use Prettus\Repository\Eloquent\BaseRepository as BaseRepositoryEloquent; abstract class BaseRepository extends BaseRepositoryEloquent implements BaseRepositoryEloquentInterface { public function add(array $tWbtB) { return parent::create($tWbtB); } public function edit($RxOxB, array $tWbtB) { return parent::update($tWbtB, $RxOxB); } public function addBatch($R3wwf) { $CVHzV = $this->model->insert($R3wwf); return $CVHzV; } public function edits(array $afw6o, array $tWbtB) { goto jjRlt; FKDIB: return 0; goto ZLpbF; jjRlt: if (!(count($afw6o) > 0)) { goto upWdK; } goto ioszF; ioszF: $CPW3O = $this->model->getKeyName(); goto RRutj; Jnf9U: $this->resetModel(); goto WOkxC; WOkxC: return $CVHzV; goto rgncq; RRutj: $CVHzV = $this->model->whereIn($CPW3O, $afw6o)->update($tWbtB); goto Jnf9U; rgncq: upWdK: goto FKDIB; ZLpbF: } public function editWhere(array $ate9G, array $tWbtB) { $afw6o = $this->findKey($ate9G); return $this->edits($afw6o, $tWbtB); } public function save(array $tWbtB, array $Q9HFS = array()) { return parent::updateOrCreate($tWbtB, $Q9HFS); } public function remove($RxOxB) { goto HFqOO; N6lDs: return $CVHzV; goto OL9L1; HFqOO: $CVHzV = $this->model->destroy($RxOxB); goto ieQoz; ieQoz: $this->resetModel(); goto N6lDs; OL9L1: } public function removeWhere(array $ate9G) { goto QTdO9; T5EWm: return $this->remove($afw6o); goto Yrr42; Agb4U: return 0; goto sTLxj; Yrr42: OgNGt: goto Agb4U; h1fEM: if (!(count($afw6o) > 0)) { goto OgNGt; } goto T5EWm; QTdO9: $afw6o = $this->findKey($ate9G); goto h1fEM; sTLxj: } protected function applyConditions(array $ate9G) { foreach ($ate9G as $de_NJ => $JCs88) { goto CFPBt; zITJu: kAxcD: goto KIqL6; GmS64: $uGSQM = $uGSQM[1]; goto FP5m3; l3FNc: $uGSQM = null; goto zv1W5; CG9rI: Rdu9z: goto NtI4Z; FW3kN: goto Rdu9z; goto e1bAO; VagtN: aTXZn: goto himUg; zv1W5: goto vzB68; goto zITJu; CFPBt: if (is_array($JCs88)) { goto DieLB; } goto IU6mc; fz0zc: if (count($uGSQM) > 1) { goto kAxcD; } goto l3FNc; nCjIR: $Y3Cc0 = preg_replace("\57\x5c\x73\x5c\163\x2b\57", "\40", trim($Y3Cc0)); goto HxAM7; himUg: D3VC1: goto CG9rI; NtI4Z: RYc3d: goto Pl83o; IU6mc: $this->model = $this->model->where($de_NJ, "\x3d", $JCs88); goto FW3kN; KIqL6: $Y3Cc0 = $uGSQM[0]; goto GmS64; FOxQU: switch (strtoupper($Y3Cc0)) { case "\111\x4e": goto bDZXW; r5lD1: on0Qp: goto SRvel; zP_SD: goto D3VC1; goto U9gRz; bDZXW: if (is_array($BMgJx)) { goto on0Qp; } goto zpB1w; zpB1w: throw new ErrorException("\x49\x6e\x70\165\164\40{$BMgJx}\40\x6d\165\x73\40\142\145\x20\x61\156\40\x61\x72\162\141\x79"); goto r5lD1; SRvel: $this->model = $this->model->whereIn($de_NJ, $BMgJx); goto zP_SD; U9gRz: case "\116\117\124\111\116": goto byxAk; ysLpD: jM4q3: goto VhK4A; MO0s7: throw new ErrorException("\x49\156\x70\165\164\x20{$BMgJx}\40\155\x75\163\40\142\x65\x20\x61\x6e\40\141\162\x72\x61\171"); goto ysLpD; VhK4A: $this->model = $this->model->whereNotIn($de_NJ, $BMgJx); goto DzG9H; byxAk: if (is_array($BMgJx)) { goto jM4q3; } goto MO0s7; DzG9H: goto D3VC1; goto VByS7; VByS7: case "\x44\x41\x54\x45": goto lxwFW; xf2fY: $this->model = $this->model->whereDate($de_NJ, $uGSQM, $BMgJx); goto IG4oP; lxwFW: if ($uGSQM) { goto aZD1M; } goto tfz1e; IG4oP: goto D3VC1; goto ybVv6; Ddqoy: aZD1M: goto xf2fY; tfz1e: $uGSQM = "\x3d"; goto Ddqoy; ybVv6: case "\x44\x41\x59": goto vCle0; w2_km: goto D3VC1; goto xTjmN; kIA3e: $this->model = $this->model->whereDay($de_NJ, $uGSQM, $BMgJx); goto w2_km; UXCgJ: GOITn: goto kIA3e; fI4Le: $uGSQM = "\x3d"; goto UXCgJ; vCle0: if ($uGSQM) { goto GOITn; } goto fI4Le; xTjmN: case "\x4d\x4f\x4e\x54\x48": goto KkGcb; wbxJu: pHvTK: goto m9OZz; m9OZz: $this->model = $this->model->whereMonth($de_NJ, $uGSQM, $BMgJx); goto r8vnp; r8vnp: goto D3VC1; goto IuRPd; KkGcb: if ($uGSQM) { goto pHvTK; } goto S91bi; S91bi: $uGSQM = "\x3d"; goto wbxJu; IuRPd: case "\x59\x45\101\x52": goto bvTs_; bvTs_: if ($uGSQM) { goto NOWPF; } goto laFrF; Cobiy: $this->model = $this->model->whereYear($de_NJ, $uGSQM, $BMgJx); goto CLBY_; laFrF: $uGSQM = "\x3d"; goto iiX8a; CLBY_: goto D3VC1; goto xFdkX; iiX8a: NOWPF: goto Cobiy; xFdkX: case "\x45\130\x49\123\x54\123": goto UJPss; sPrHP: goto D3VC1; goto k3HZc; i2omi: throw new ErrorException("\x49\156\160\165\164\x20{$BMgJx}\40\x6d\165\163\x74\40\x62\145\40\x63\x6c\x6f\x73\x75\x72\145\x20\x66\165\156\143\x74\x69\157\x6e"); goto tS0lp; YjBbA: $this->model = $this->model->whereExists($BMgJx); goto sPrHP; tS0lp: mWg_K: goto YjBbA; UJPss: if ($BMgJx instanceof Closure) { goto mWg_K; } goto i2omi; k3HZc: case "\x48\101\x53": goto qkeVX; EP8Jl: throw new ErrorException("\111\x6e\160\165\164\40{$BMgJx}\x20\x6d\165\163\x74\40\142\x65\x20\x63\x6c\x6f\163\x75\162\145\x20\x66\x75\x6e\x63\x74\x69\x6f\x6e"); goto ecOKe; qkeVX: if ($BMgJx instanceof Closure) { goto MTAgL; } goto EP8Jl; ecOKe: MTAgL: goto FMvg5; FMvg5: $this->model = $this->model->whereHas($de_NJ, $BMgJx); goto XkR76; XkR76: goto D3VC1; goto c6PQF; c6PQF: case "\110\x41\x53\115\117\122\120\110": goto bgVqo; y7WCy: goto D3VC1; goto Y_o3x; RIck3: throw new ErrorException("\x49\x6e\x70\x75\x74\40{$BMgJx}\40\155\x75\163\x74\40\142\145\x20\143\x6c\x6f\163\x75\162\145\40\146\165\156\143\164\151\157\156"); goto MLYJ9; MLYJ9: PwNJn: goto jekZj; bgVqo: if ($BMgJx instanceof Closure) { goto PwNJn; } goto RIck3; jekZj: $this->model = $this->model->whereHasMorph($de_NJ, $BMgJx); goto y7WCy; Y_o3x: case "\x44\117\105\x53\116\124\110\x41\x56\x45": goto bo9l9; lWQXW: $this->model = $this->model->whereDoesntHave($de_NJ, $BMgJx); goto PkQXj; PkQXj: goto D3VC1; goto utJjK; eqSqy: throw new ErrorException("\x49\x6e\x70\x75\x74\x20{$BMgJx}\40\x6d\165\163\164\40\142\x65\x20\x63\x6c\157\163\165\162\145\x20\x66\x75\156\x63\164\x69\x6f\156"); goto Opbmh; bo9l9: if ($BMgJx instanceof Closure) { goto zRszz; } goto eqSqy; Opbmh: zRszz: goto lWQXW; utJjK: case "\104\x4f\x45\123\116\x54\110\101\x56\x45\115\117\122\120\x48": goto zVcgV; jv7Ul: $this->model = $this->model->whereDoesntHaveMorph($de_NJ, $BMgJx); goto KCKgw; SJTsG: throw new ErrorException("\111\156\160\165\164\x20{$BMgJx}\40\x6d\x75\x73\164\x20\142\x65\40\x63\x6c\157\163\x75\162\145\40\x66\x75\156\x63\164\x69\x6f\x6e"); goto xhbKC; KCKgw: goto D3VC1; goto UynDG; zVcgV: if ($BMgJx instanceof Closure) { goto JHvBd; } goto SJTsG; xhbKC: JHvBd: goto jv7Ul; UynDG: case "\x42\x45\124\x57\105\105\116": goto uAomz; PP9dG: throw new ErrorException("\111\156\160\165\x74\x20{$BMgJx}\40\x6d\165\163\40\142\x65\x20\141\156\40\x61\x72\162\x61\x79"); goto QXUJx; nGyxG: goto D3VC1; goto pU4HH; QXUJx: Fzz8k: goto yEzlx; uAomz: if (is_array($BMgJx)) { goto Fzz8k; } goto PP9dG; yEzlx: $this->model = $this->model->whereBetween($de_NJ, $BMgJx); goto nGyxG; pU4HH: case "\x42\x45\x54\x57\x45\x45\116\103\x4f\114\x55\x4d\x4e\x53": goto wbNRp; wbNRp: if (is_array($BMgJx)) { goto jwaVf; } goto dyeSW; xZK3l: goto D3VC1; goto ja6l0; HcndN: jwaVf: goto SeChv; SeChv: $this->model = $this->model->whereBetweenColumns($de_NJ, $BMgJx); goto xZK3l; dyeSW: throw new ErrorException("\111\x6e\x70\x75\164\x20{$BMgJx}\x20\155\165\163\x20\142\x65\x20\x61\x6e\x20\x61\162\162\x61\x79"); goto HcndN; ja6l0: case "\x4e\x4f\124\x42\x45\124\127\x45\105\116": goto GWhOb; GWhOb: if (is_array($BMgJx)) { goto H4qD9; } goto maYQb; maYQb: throw new ErrorException("\x49\x6e\x70\165\164\40{$BMgJx}\40\155\165\163\x20\142\x65\x20\141\x6e\40\x61\162\x72\141\x79"); goto gkupI; gkupI: H4qD9: goto m2PT2; gvrIL: goto D3VC1; goto cgI0p; m2PT2: $this->model = $this->model->whereNotBetween($de_NJ, $BMgJx); goto gvrIL; cgI0p: case "\116\117\x54\102\105\124\127\105\105\x4e\x43\117\x4c\125\115\116\x53": goto c4k1n; GwZRo: tu68F: goto rIsLS; rIsLS: $this->model = $this->model->whereNotBetweenColumns($de_NJ, $BMgJx); goto hbc3B; hbc3B: goto D3VC1; goto f0NMs; p9Z26: throw new ErrorException("\x49\x6e\x70\x75\x74\40{$BMgJx}\x20\155\x75\163\40\142\x65\40\x61\156\x20\x61\162\x72\x61\171"); goto GwZRo; c4k1n: if (is_array($BMgJx)) { goto tu68F; } goto p9Z26; f0NMs: case "\122\x41\x57": $this->model = $this->model->whereRaw($BMgJx); goto D3VC1; case "\x46\111\x4e\x44\137\x49\x4e\137\x53\x45\124": $this->applyFindInSetCondition($de_NJ, $BMgJx); goto D3VC1; default: $this->model = $this->model->where($de_NJ, $Y3Cc0, $BMgJx); } goto VagtN; e1bAO: DieLB: goto nPPUQ; FP5m3: vzB68: goto FOxQU; HxAM7: $uGSQM = explode("\40", $Y3Cc0); goto fz0zc; nPPUQ: list($de_NJ, $Y3Cc0, $BMgJx) = $JCs88; goto nCjIR; Pl83o: } EGdhK: } protected function applyFindInSetCondition($de_NJ, $BMgJx) { goto dtzfk; dtzfk: if (is_array($BMgJx)) { goto HsUi8; } goto nmyrK; pQrEU: HsUi8: goto Pawv7; nmyrK: throw new ErrorException("\111\156\x70\x75\164\40{$BMgJx}\40\155\x75\163\x74\x20\x62\145\x20\141\x6e\40\141\162\x72\141\171\40\146\157\x72\40\106\x49\116\x44\x5f\x49\x4e\137\x53\x45\124"); goto pQrEU; Pawv7: foreach ($BMgJx as $JCs88) { $this->model = $this->model->whereRaw("\x46\111\x4e\x44\x5f\111\x4e\137\x53\x45\124\50\77\x2c\x20{$de_NJ}\51", [$JCs88]); MYx9r: } goto vKTf0; vKTf0: Vb05j: goto DWz9P; DWz9P: } public function getOne($RxOxB) { goto aXsYY; USCOD: return []; goto H3HOK; p1FuJ: C3z77: goto xvhwC; xvhwC: return current($R3wwf); goto kXeuD; kXeuD: o58Gt: goto U40kr; aXsYY: $R3wwf = $this->gets($RxOxB); goto Zi8Mw; Zi8Mw: if (!empty($R3wwf)) { goto C3z77; } goto USCOD; H3HOK: goto o58Gt; goto p1FuJ; U40kr: } public function gets($afw6o, $PDJ8X = true) { goto OC2Ez; q9GgC: $afw6o = [$afw6o]; goto ii2kL; azj0w: $CPW3O = $this->model->getKeyName(); goto bt2T8; lNLKP: return $YEACD ? $YEACD->toArray() : []; goto Cf8z1; OC2Ez: if (is_array($afw6o)) { goto O_m7L; } goto q9GgC; bt2T8: $YEACD = $this->findWhereIn($CPW3O, $afw6o); goto Cy3kf; ii2kL: O_m7L: goto azj0w; S3wrY: $YEACD = $YEACD->keyBy($CPW3O); goto ATmUs; Cy3kf: if (!$PDJ8X) { goto R40Gx; } goto S3wrY; ATmUs: R40Gx: goto lNLKP; Cf8z1: } public function list($rV3aw, $hiypA = null) { goto X60NK; X60NK: $hiypA = intval($hiypA ?? config("\x72\145\160\157\163\x69\164\x6f\162\x79\56\x70\141\147\x69\156\141\x74\151\x6f\156\x2e\x6c\x69\155\x69\164", 15)); goto S3F0h; m242x: return $IB5aa; goto NC5pB; S3F0h: $this->pushCriteria($rV3aw); goto BWA9J; BWA9J: $IB5aa = parent::paginate($hiypA)->toArray(); goto ma3O2; ma3O2: $IB5aa["\x6c\x69\x6d\151\164"] = $hiypA; goto m242x; NC5pB: } public function listKey(Criteria $rV3aw, $hiypA = null) { goto uCczq; aGi8X: $IB5aa = parent::paginate($hiypA)->pluck($this->model->getKeyName())->toArray(); goto cOc5s; AonhM: return $IB5aa; goto l98EP; cOc5s: $IB5aa["\154\151\155\x69\x74"] = $hiypA; goto AonhM; tOGq2: $this->pushCriteria($rV3aw); goto aGi8X; uCczq: $hiypA = intval($hiypA ?? config("\162\145\x70\x6f\163\151\x74\157\x72\x79\x2e\160\x61\147\151\156\x61\164\x69\x6f\156\x2e\x6c\x69\x6d\x69\164", 15)); goto tOGq2; l98EP: } public function finds(array $ate9G, $i_0e_ = array(), $Qydtf = null, $R3wwf = null) { goto tkpVN; kADuP: return $YEACD ? $YEACD->toArray() : []; goto n7goG; tkpVN: $CPW3O = $this->model->getKeyName(); goto aHirf; XcYdQ: gQ6sW: goto bt1yz; tSLSX: if ($Qydtf && $R3wwf) { goto gQ6sW; } goto p5S37; nex9h: foreach ($i_0e_ as $N16YQ => $wa_3u) { $this->orderBy($N16YQ, $wa_3u); A81uD: } goto M04uB; dA0x0: $YEACD = $this->model->paginate($R3wwf, ["\x2a"], "\160\141\147\x65", $Qydtf)->keyBy($CPW3O); goto rZQJJ; IV52s: goto xLuvy; goto XcYdQ; bt1yz: $this->applyConditions($ate9G); goto dA0x0; rZQJJ: $this->resetModel(); goto dh0DY; p5S37: $YEACD = $this->findWhere($ate9G)->keyBy($CPW3O); goto IV52s; dh0DY: xLuvy: goto kADuP; B9hEH: $i_0e_ = [$CPW3O => "\104\105\x53\103"]; goto ZW3ZA; ZW3ZA: F2Y4M: goto nex9h; aHirf: if (!empty($i_0e_)) { goto F2Y4M; } goto B9hEH; M04uB: HTCAy: goto tSLSX; n7goG: } public function findKey(array $ate9G) { $YEACD = $this->findWhere($ate9G)->pluck($this->model->getKeyName()); return $YEACD ? $YEACD->toArray() : []; } public function findOne(array $ate9G, $i_0e_ = array()) { $YEACD = $this->finds($ate9G, $i_0e_); return !empty($YEACD) ? current($YEACD) : []; } public function incrementFieldByIds(array $afw6o, $ukbM_, $JCs88 = 1) { $CPW3O = $this->model->getKeyName(); return $this->model->whereIn($CPW3O, $afw6o)->increment($ukbM_, $JCs88); } public function decrementFieldByIds(array $afw6o, $ukbM_, $JCs88 = 1) { $CPW3O = $this->model->getKeyName(); return $this->model->whereIn($CPW3O, $afw6o)->decrement($ukbM_, $JCs88); } public function getNum($ate9G = array()) { $ExY4O = $this->findWhere($ate9G)->count(); return $ExY4O; } }
